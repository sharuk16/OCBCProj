@using Microsoft.AspNetCore.Http;
@{
    ViewData["Title"] = "Login";
}
@section css{
    @*Add specific css script here*@
    <link rel="stylesheet" href="~/css/login.css" />
}

<div class="container form" id="mainContainer2">
    <div class="first-container">
        <div style="text-align: center; margin-top:2%">
            <img id="imgLogo" src="~/images/Login.jpeg"
                 style="width: 70%" />
            <h1 style="margin-top:2%;margin-bottom:20px">Welcome back!</h1>
        </div>
    </div>
</div>
<div class="container form">
    <div class="row">
        <div class="col text-center">
            <div class="container">
                <div class="form-group" style="color: white">
                    <h2><label for="balance">Username</label></h2>
                </div>
                <div class="input" style="padding-top: 1px; padding-bottom: 0px; padding-right: 80px; padding-left: 80px; display: inline-block;">
                    <input type="text" placeholder="Enter Username" class="form-control" id="to" style="background-color: #E7625F; border: transparent; color: white; text-align: center;">
                </div>
                <div class="form-group" style="color: white">
                    <h2><label for="balance">Password</label></h2>
                </div>
                <div class="input" style="padding-top: 1px; padding-bottom: 0px; padding-right: 80px; padding-left: 80px; display: inline-block;">
                    <input type="text" placeholder="Enter Password" class="form-control" id="to" style="background-color: #E7625F; border: transparent; color: white; text-align: center;">
                </div>
            </div>
            <!-- Login Button -->
            <div class="every" style="padding-top:20px;padding-right:250px;padding-left:250px; padding-bottom:0px; display: inline-block;">
                <div class="btn" id="login">@Html.ActionLink("Login", "FundTransfer", "FundTransfer")</div>
            </div>
            <div class="container-fluid">
                <div class="row align-items-center">
                    <div class="col" style="margin:50px">
                        <div class="every" style="padding-top:0px;padding-right:50px;padding-left:50px; display: inline-block;">
                            @if (Context.Session.GetString("NRIC") == null)
                            {
                                <button id="activateButton" data-toggle="modal" data-target="#facialRecog">Login via Face Recognition</button>
                            }
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="add-update-msg" style="text-align:center;">
    <div>
        <lottie-player src="https://assets1.lottiefiles.com/packages/lf20_sawdagxh.json" background="transparent" speed="1" style="text-align:center; width: 600px; height: 600px;margin: auto;" loop autoplay></lottie-player>
    </div>
</div>

<!--This is for the modal(pop-up) for webcam facial detection-->
<div class="modal fade" id="facialRecog" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content" style="height:auto;width:auto;">
            <div class="container">
                <div>Please look into the camera and wait.</div>
                <div id="livecam" class="cam">
                    <video id="webcam" autoplay width="640" height="480"></video>
                </div>
                <div>Confidence: <span id="confidence"></span></div>

            </div>
        </div>
    </div>
</div>
@section Scripts{
    <script src="~/js/login.js"></script>
    <script src="https://unpkg.com/@@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
    <script>
        setTimeout(myFunction, 3000); //function to change the window location to homepage
    </script>
    <script src="https://unpkg.com/@@tensorflow/tfjs-core@2.4.0/dist/tf-core.js"></script>
    <script src="https://unpkg.com/@@tensorflow/tfjs-converter@2.4.0/dist/tf-converter.js"></script>
    <!-- You must explicitly require a TF.js backend if you're not using the tfjs union bundle. -->
    <script src="https://unpkg.com/@@tensorflow/tfjs-backend-webgl@2.4.0/dist/tf-backend-webgl.js"></script>
    <!-- Require face-landmarks-detection itself. -->
    <script src="https://unpkg.com/@@tensorflow-models/face-landmarks-detection@0.0.1/dist/face-landmarks-detection.js"></script>
    <script src="~/js/ml.js"></script>
    <script>
        $(document).ready(function () {
            $("#add-update-msg").hide();
        })
    function redirecting(totalsum) {
    var url = '@Url.Action("faceLogin", "home", new { id = "__id__" })';
    window.location.href = url.replace('__id__', totalsum);
        } $("#login a").click(function (e) {
            $(".form").hide();
            $("#add-update-msg").show();
            setTimeout(function () {
                location.reload();
            }, 2000);
        })
    </script>
}
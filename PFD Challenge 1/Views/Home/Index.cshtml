@using Microsoft.AspNetCore.Http;
@{
    ViewData["Title"] = "Login";
}

<div class="container-fluid">
    <div class="row align-items-center">
        <div class="col" style="margin:50px; height:70vh;">
            <lottie-player src="https://assets5.lottiefiles.com/packages/lf20_yupefrh2.json" background="transparent" speed="0.3" loop autoplay></lottie-player>
        </div>
        <div class="col" style="margin:50px">
            @if (Context.Session.GetString("NRIC")== null)
            {
            <button id="activateButton" data-toggle="modal" data-target="#facialRecog">Login via Face Recognition</button>
            }                
        </div>
    </div>
</div>
<div class="modal fade" id="facialRecog" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content" style="height:auto;width:auto;">
            <div class="container">
                <div>Please look into the camera and wait.</div>
                <div id="livecam" class="cam">
                    <video id="webcam" autoplay width="640" height="480"></video>
                </div>
                <div>Confidence: <span id="confidence"></span></div>

            </div>
        </div>
    </div>
</div>
@section Scripts{
    <script src="https://unpkg.com/@@tensorflow/tfjs-core@2.4.0/dist/tf-core.js"></script>
    <script src="https://unpkg.com/@@tensorflow/tfjs-converter@2.4.0/dist/tf-converter.js"></script>
    <!-- You must explicitly require a TF.js backend if you're not using the tfjs union bundle. -->
    <script src="https://unpkg.com/@@tensorflow/tfjs-backend-webgl@2.4.0/dist/tf-backend-webgl.js"></script>
    <!-- Require face-landmarks-detection itself. -->
    <script src="https://unpkg.com/@@tensorflow-models/face-landmarks-detection@0.0.1/dist/face-landmarks-detection.js"></script>
    <script src="~/js/ml.js"></script>
    <script>
    function redirecting(totalsum) {
    var url = '@Url.Action("faceLogin", "home", new { id = "__id__" })';
    window.location.href = url.replace('__id__', totalsum);
    }</script>
}